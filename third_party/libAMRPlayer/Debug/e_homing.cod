; Listing generated by Microsoft (R) Optimizing Compiler Version 18.00.40629.0 

	TITLE	E:\mywork\client\PC2.0TRUNK\PC2.0\third_party\libAMRPlayer\AMR\e_homing.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	_e_homing_id
CONST	SEGMENT
_e_homing_id DB	'@(#)$Id $$Id $', 00H
CONST	ENDS
PUBLIC	_encoder_homing_frame_test
EXTRN	__RTC_CheckEsp:PROC
EXTRN	__RTC_InitBase:PROC
EXTRN	__RTC_Shutdown:PROC
EXTRN	__RTC_UninitUse:PROC
;	COMDAT rtc$TMZ
rtc$TMZ	SEGMENT
__RTC_Shutdown.rtc$TMZ DD FLAT:__RTC_Shutdown
rtc$TMZ	ENDS
;	COMDAT rtc$IMZ
rtc$IMZ	SEGMENT
__RTC_InitBase.rtc$IMZ DD FLAT:__RTC_InitBase
rtc$IMZ	ENDS
; Function compile flags: /Odtp /RTCsu /ZI
; File e:\mywork\client\pc2.0trunk\pc2.0\third_party\libamrplayer\amr\e_homing.c
;	COMDAT _encoder_homing_frame_test
_TEXT	SEGMENT
tv77 = -232						; size = 4
$T1 = -221						; size = 1
_j$ = -20						; size = 2
_i$ = -8						; size = 2
_input_frame$ = 8					; size = 4
_encoder_homing_frame_test PROC				; COMDAT

; 60   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec e8 00 00
	00		 sub	 esp, 232		; 000000e8H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi
  0000c	8d bd 18 ff ff
	ff		 lea	 edi, DWORD PTR [ebp-232]
  00012	b9 3a 00 00 00	 mov	 ecx, 58			; 0000003aH
  00017	b8 cc cc cc cc	 mov	 eax, -858993460		; ccccccccH
  0001c	f3 ab		 rep stosd
  0001e	c6 85 23 ff ff
	ff 00		 mov	 BYTE PTR $T1[ebp], 0

; 61   :     Word16 i, j;
; 62   : 
; 63   :     /* check 160 input samples for matching EHF_MASK: defined in e_homing.h */
; 64   :     for (i = 0; i < L_FRAME; i++)

  00025	33 c0		 xor	 eax, eax
  00027	66 89 45 f8	 mov	 WORD PTR _i$[ebp], ax
  0002b	eb 0c		 jmp	 SHORT $LN4@encoder_ho
$LN3@encoder_ho:
  0002d	66 8b 45 f8	 mov	 ax, WORD PTR _i$[ebp]
  00031	66 83 c0 01	 add	 ax, 1
  00035	66 89 45 f8	 mov	 WORD PTR _i$[ebp], ax
$LN4@encoder_ho:
  00039	0f bf 45 f8	 movsx	 eax, WORD PTR _i$[ebp]
  0003d	3d a0 00 00 00	 cmp	 eax, 160		; 000000a0H
  00042	7d 3b		 jge	 SHORT $LN2@encoder_ho

; 65   :     {
; 66   :         j = input_frame[i] ^ EHF_MASK;

  00044	0f bf 45 f8	 movsx	 eax, WORD PTR _i$[ebp]
  00048	8b 4d 08	 mov	 ecx, DWORD PTR _input_frame$[ebp]
  0004b	0f bf 14 41	 movsx	 edx, WORD PTR [ecx+eax*2]
  0004f	83 f2 08	 xor	 edx, 8
  00052	c6 85 23 ff ff
	ff 01		 mov	 BYTE PTR $T1[ebp], 1
  00059	66 89 55 ec	 mov	 WORD PTR _j$[ebp], dx

; 67   : 
; 68   :         if (j)

  0005d	80 bd 23 ff ff
	ff 00		 cmp	 BYTE PTR $T1[ebp], 0
  00064	75 0d		 jne	 SHORT $LN9@encoder_ho
  00066	68 00 00 00 00	 push	 OFFSET $LN10@encoder_ho
  0006b	e8 00 00 00 00	 call	 __RTC_UninitUse
  00070	83 c4 04	 add	 esp, 4
$LN9@encoder_ho:
  00073	0f bf 45 ec	 movsx	 eax, WORD PTR _j$[ebp]
  00077	85 c0		 test	 eax, eax
  00079	74 02		 je	 SHORT $LN1@encoder_ho

; 69   :             break;

  0007b	eb 02		 jmp	 SHORT $LN2@encoder_ho
$LN1@encoder_ho:

; 70   :     }

  0007d	eb ae		 jmp	 SHORT $LN3@encoder_ho
$LN2@encoder_ho:

; 71   : 
; 72   :     return !j;

  0007f	80 bd 23 ff ff
	ff 00		 cmp	 BYTE PTR $T1[ebp], 0
  00086	75 0d		 jne	 SHORT $LN11@encoder_ho
  00088	68 00 00 00 00	 push	 OFFSET $LN10@encoder_ho
  0008d	e8 00 00 00 00	 call	 __RTC_UninitUse
  00092	83 c4 04	 add	 esp, 4
$LN11@encoder_ho:
  00095	0f bf 45 ec	 movsx	 eax, WORD PTR _j$[ebp]
  00099	85 c0		 test	 eax, eax
  0009b	75 0c		 jne	 SHORT $LN7@encoder_ho
  0009d	c7 85 18 ff ff
	ff 01 00 00 00	 mov	 DWORD PTR tv77[ebp], 1
  000a7	eb 0a		 jmp	 SHORT $LN8@encoder_ho
$LN7@encoder_ho:
  000a9	c7 85 18 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv77[ebp], 0
$LN8@encoder_ho:
  000b3	66 8b 85 18 ff
	ff ff		 mov	 ax, WORD PTR tv77[ebp]

; 73   : }

  000ba	5f		 pop	 edi
  000bb	5e		 pop	 esi
  000bc	5b		 pop	 ebx
  000bd	81 c4 e8 00 00
	00		 add	 esp, 232		; 000000e8H
  000c3	3b ec		 cmp	 ebp, esp
  000c5	e8 00 00 00 00	 call	 __RTC_CheckEsp
  000ca	8b e5		 mov	 esp, ebp
  000cc	5d		 pop	 ebp
  000cd	c3		 ret	 0
$LN12@encoder_ho:
$LN10@encoder_ho:
  000ce	6a		 DB	 106			; 0000006aH
  000cf	00		 DB	 0
_encoder_homing_frame_test ENDP
_TEXT	ENDS
END
