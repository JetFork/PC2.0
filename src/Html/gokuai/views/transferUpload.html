<div class="btn-wrapper">
    <button class="btn" ng-class="{active: vm.viewStatus == 'uploading'}" ng-click="vm.changeView('uploading')">正在上传</button>
    <button class="btn" ng-class="{active: vm.viewStatus == 'complete'}" ng-click="vm.changeView('complete')">已完成</button>
</div>

<div ng-if="vm.viewStatus == 'uploading'">
    <div class="toolbar">
        <a class="tool-item" ng-click="vm.startAll()">
            <span class="fa fa-play"></span>
            <span>全部开始</span>
        </a>
        <a class="tool-item" ng-click="vm.pauseAll()">
            <span class="fa fa-pause"></span>
            <span>全部暂停</span>
        </a>
        <a class="tool-item" ng-click="vm.clearAll()">
            <span class="fa fa-times"></span>
            <span>全部取消</span>
        </a>
    </div>

    <div class="transfer-content">
        <ul infinite-scroll-disabled="!vm.canUploadLoad || vm.uploadLoading"
            infinite-scroll-parent="true" infinite-scroll="vm.uploadList(vm.uploadStart)"
            infinite-scroll-distance="1" infinite-scroll-immediate-check="false">
            <li ng-repeat="item in vm.uploadItems" class="transfer-item">
                <div class="item-icon file-icon-28 icon-{{item.fileicon}}-28"></div>
                <div class="item-info">
                    <div class="item-name" title="{{item.filename}}">{{item.filename}}</div>
                    <div class="item-progressbar" ng-style="{width: item.progress}" ng-if="item.dir == 0"></div>
                </div>
                <div class="item-size">{{item.humansize}}</div>
                <div class="item-status">
                    <span class="transfer-status" ng-if="item.status == 1" ng-bind="item.timeLeft"></span>
                    <span class="transfer-status" ng-if="item.status == 2">等待传输</span>
                    <span class="transfer-status" ng-if="item.status == 3">已暂停</span>
                    <span class="transfer-status" ng-if="item.status == 4">完成</span>
                    <span title="{{item.errormsg ? item.errormsg : '未知错误'}}" class="transfer-status transfer-status-error" ng-if="item.status == 5" ng-bind="item.errormsg ? item.errormsg : '未知错误'"></span>
                </div>
                <div class="item-act">
                    <span ng-if="item.status == 1 || item.status == 2" class="fa fa-pause" style="color: #7d8999;" ng-click="vm.pauseUpload(item)"></span>
                    <span ng-if="item.status == 3" class="fa fa-play-circle" style="color: #438ce8;" ng-click="vm.startUpload(item)"></span>
                    <span ng-if="item.status == 5" class="fa fa-repeat" style="color: #54af76;" ng-click="vm.startUpload(item)"></span>
                </div>
                <div class="item-act">
                    <span class="fa fa-times" ng-click="vm.clearUpload(item)" ng-if="item.sync != 1" style="color: #7d8999;"></span>
                </div>
            </li>
        </ul>
    </div>
</div>


<div ng-if="vm.viewStatus == 'complete'">
    <div class="toolbar">
        <a class="tool-item" ng-click="vm.clearUploaded()">
            <span class="fa fa-trash"></span>
            <span>清除上传历史</span>
        </a>
    </div>

    <div class="transfer-content">
        <ul infinite-scroll-disabled="!vm.canUploadedLoad || vm.uploadedLoading"
            infinite-scroll-parent="true" infinite-scroll="vm.uploadedList(vm.uploadedStart)"
            infinite-scroll-distance="1" infinite-scroll-immediate-check="false">
            <li ng-repeat="item in vm.uploadedItems track by $index" class="transfer-item">
                <div class="item-icon file-icon-28 icon-{{item.fileicon}}-28"></div>
                <div class="item-info">
                    <div class="item-name" style="height: 45px;line-height: 45px;">{{item.filename}}</div>
                </div>
                <div class="item-size" style="width: 150px;">{{item.humansize}}</div>
                <!--<div class="item-place" ng-click="vm.goToLocal(item)">-->
                    <!--<span>本地位置</span>-->
                <!--</div>-->
            </li>
        </ul>
    </div>
</div>

<div class="transfer-footer">
    <div style="display: inline-block;">
        <span>上传速度：</span>
        <span>{{vm.uploadSpeed | transferSpeed}}</span>
    </div>
    <div style="display: inline-block;">
        <span>下载速度：</span>
        <span>{{vm.downloadSpeed | transferSpeed}}</span>
    </div>
</div>